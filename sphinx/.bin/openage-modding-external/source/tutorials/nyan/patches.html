

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Patches &mdash; openage v0.4.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> openage
          

          
            
            <img src="../../../../../_static/banner.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/sphinx/installation/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/installation/basic_installation.html">Basic Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/installation/basic_installation.html#linux-installation">Linux Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/installation/basic_installation.html#windows-installation">Windows Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/installation/basic_installation.html#macos-installation">macOS Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/installation/building.html">Building from Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/building.html">Building the project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/build_instructions/index.html">Dependency installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/installation/platform_support.html">Platform Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/installation/platform_support.html#continuous-integration-targets">Continuous Integration Targets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/installation/platform_support.html#other-platforms">Other Platforms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/troubleshooting.html#windows-installer">Windows Installer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/troubleshooting.html#asset-conversion">Asset Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/troubleshooting.html#ingame">Ingame</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/index.html">Handbooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-user/index.html">User handbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-user/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-user/tutorial.html">Tutorials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-mod/index.html">Modding handbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-mod/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-mod/concepts.html">Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/assets_conversion.html">Assets &amp; Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/nyan/index.html">nyan - Entity-Component-System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/reverse_engineering.html">Reverse Engineering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/ideas/index.html">Ideas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-mod/tutorial.html">Tutorials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-dev/index.html">Developing handbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-dev/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-dev/concepts.html">Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-dev/code_style.html">Code-style</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/code/index.html">Code documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/nyan/index.html">nyan - Entity-Component-System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/assets_conversion.html">Assets &amp; Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/reverse_engineering.html">Reverse Engineering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/ideas/index.html">Ideas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/sphinx/handbooks/handbook-dev/tutorial.html">Tutorials</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/sphinx/reference/index.html">References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/nyan/api_reference/index.html">API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/nyan/api_reference/reference_ability.html">engine.ability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/nyan/api_reference/reference_aux.html">engine.aux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/nyan/api_reference/reference_effect.html">engine.effect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/nyan/api_reference/reference_modifier.html">engine.modifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/nyan/api_reference/reference_resistance.html">engine.resistance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/nyan/api_reference/reference_root.html">engine.root</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/reference/doxygen.html">openage c++/python reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/sphinx/whatsnew.html">Whatâ€™s new?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/changelogs.html">Changelogs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../changelog.html">Changelog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/changelogs/engine/index.html">Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/changelogs/nyan_api/index.html">Nyan API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/sphinx/releasenotes.html">Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../releasenotes.html">0.4.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../releasenotes.html#id2">0.3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../releasenotes.html#id5">0.2.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../releasenotes.html#id8">0.2.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../releasenotes.html#id11">0.2.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../releasenotes.html#id14">0.2.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../releasenotes.html#id17">0.1.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../releasenotes.html#id20">0.0.0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/sphinx/about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README.html">openage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#contact">Contact</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#technical-foundation">Technical foundation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#goals">Goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#current-state-of-the-project">Current State of the Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#installation-packages">Installation Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#dependencies-building-and-running">Dependencies, Building and Running</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#contributing">Contributing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#development-process">Development Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../README.html#license">License</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/README.html">Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/README.html#static-docs">Static Docs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/README.html#dynamic-docs">Dynamic Docs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/status.html">openage status</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/status.html#the-list-must-grow">The list must grow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/status.html#working-features">Working features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/status.html#missing-functionality">Missing functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../doc/status.html#under-the-hood">Under the hood</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/milestones.html">Milestones</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">openage</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
      <li>Patches</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/.bin/openage-modding-external/source/tutorials/nyan/patches.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="patches">
<h1>Patches<a class="headerlink" href="#patches" title="Permalink to this headline">Â¶</a></h1>
<p>Patches are special objects that can change the member values of objects. Everything that is considered an <em>upgrade</em> in real-time strategy games is done through patching in nyan.</p>
<div class="section" id="basic-synatx">
<h2>Basic synatx<a class="headerlink" href="#basic-synatx" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PatchName</span><span class="o">&lt;</span><span class="n">TargetObject</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="c1"># This is a comment</span>
    <span class="n">int_member</span> <span class="o">-=</span> <span class="mi">5</span>
    <span class="n">text_member</span> <span class="o">+=</span> <span class="s2">&quot;yes&quot;</span>
    <span class="n">set_member</span> <span class="o">&amp;=</span> <span class="p">{</span><span class="n">Archer</span><span class="p">,</span> <span class="n">Knight</span><span class="p">,</span> <span class="n">Spearman</span><span class="p">}</span>
    <span class="n">object_member</span> <span class="o">=</span> <span class="n">MoveAbility</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The above example shows the declaration of a patch. Patches always have exactly one target denoted in angled brackets (<code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code>). The target indicates the type of object that can be changed by the patch. Target objects may be abstract.</p>
<p>Patches themselves are only allowed to change existing members of an object, not to introduce new ones. However, they can add new parents to an object which leads to the parent members being added to the object. This is discussed in section <a class="reference external" href="#adding-inheritance">Adding inheritance</a>.</p>
<p>Apart from having to specify a target and the lacking ability to introduce new members directly, patches have the same characteristics as normal objects. This includes the ability to inherit from other patches. When a parent of a patch already specified a target, the derived patch is not allowed to change it. All children of a patch will implicitly affect the same patch target.</p>
</div>
<div class="section" id="applying-a-patch">
<h2>Applying a patch<a class="headerlink" href="#applying-a-patch" title="Permalink to this headline">Â¶</a></h2>
<p>Patches are applied at runtime during a game. When, where and why a patch is applied is decided by the openage engine functions and is only limited by the type of the target object. The number of applications of a patch is not limited and independent from its declaration. Depending on the game, it could be applied once, infinite times or never.</p>
<p>It is also important to mention that a patch <strong>does not</strong> change the declaration of an object and has no influence on the actual nyan files. Patches operate on <em>instances</em> of objects in the nyan database of the engine. Only these instances are altered.</p>
<p>Patches can be applied to all instances, a set of instances or one specific instance of an object. This is an important difference to the system used in Age of Empires II where upgrades usually affect all instances of an object. In nyan, every object that has the type of the target object has the potential of being patched, but does not have to be patched necessarily.</p>
<p>The example below shows how an instance is altered by a patch.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is a normal object</span>
<span class="n">Archer</span><span class="p">(</span><span class="n">RangedUnit</span><span class="p">):</span>
    <span class="n">hp</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">attack</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="mf">0.96</span>

<span class="c1"># This is a patch</span>
<span class="n">Fletching</span><span class="o">&lt;</span><span class="n">RangedUnit</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Tech</span><span class="p">):</span>
    <span class="n">attack</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Here we see two objects: <code class="docutils literal notranslate"><span class="pre">Archer</span></code> and <code class="docutils literal notranslate"><span class="pre">Fletching</span></code>. <code class="docutils literal notranslate"><span class="pre">Fletching</span></code> is also a patch because it has specified <code class="docutils literal notranslate"><span class="pre">RangedUnit</span></code> as a target. It increases the value of <code class="docutils literal notranslate"><span class="pre">attack</span></code> by <code class="docutils literal notranslate"><span class="pre">1</span></code> each time it is applied. Because <code class="docutils literal notranslate"><span class="pre">Archer</span></code> inherits from <code class="docutils literal notranslate"><span class="pre">RangedUnit</span></code>, it is of the type <code class="docutils literal notranslate"><span class="pre">RangedUnit</span></code> and the patch can potentially be applied to its instances.</p>
<p>Letâ€™s have a look at an instance of archer <em><strong>before</strong></em> the application of the patch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Archer</span> <span class="n">instance</span><span class="p">)</span>
    <span class="n">hp</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">attack</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="mf">0.96</span>
</pre></div>
</div>
<p>This instance still has the default values of the object declaration. We now apply <code class="docutils literal notranslate"><span class="pre">Fletching</span></code>, e.g. by an engine function for researching technologies.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Archer</span> <span class="n">instance</span><span class="p">)</span>
    <span class="n">hp</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">attack</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="mf">0.96</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">attack</span></code> has increased by 1, as we expected. We now apply the patch a second time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Archer</span> <span class="n">instance</span><span class="p">)</span>
    <span class="n">hp</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">attack</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="mf">0.96</span>
</pre></div>
</div>
<p>Again, the <code class="docutils literal notranslate"><span class="pre">attack</span></code> value increased by 1.</p>
</div>
</div>
<div class="section" id="patching-a-patch">
<h2>Patching a Patch<a class="headerlink" href="#patching-a-patch" title="Permalink to this headline">Â¶</a></h2>
<p>Because patches are just a special kind of object, they can be patched too. This is especially useful for mods, which want to change the effects of existing technologies or unit upgrades.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fletching</span><span class="o">&lt;</span><span class="n">RangedUnit</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Tech</span><span class="p">):</span>
    <span class="n">attack</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">BetterFletching</span><span class="o">&lt;</span><span class="n">Fletching</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="n">attack</span> <span class="o">+=</span><span class="mi">2</span>
</pre></div>
</div>
<p>In the above example we see two patches: <code class="docutils literal notranslate"><span class="pre">Fletching</span></code> and <code class="docutils literal notranslate"><span class="pre">BetterFletching</span></code>. <code class="docutils literal notranslate"><span class="pre">BetterFletching</span></code> patches <code class="docutils literal notranslate"><span class="pre">Fletching</span></code> by increasing the value of the member <code class="docutils literal notranslate"><span class="pre">attack</span></code> by 2.</p>
<p>There are peculiarities to consider as we will see in the next example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DebuffAttack</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="n">attack</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="n">DebuffPatch</span><span class="o">&lt;</span><span class="n">DebuffAttack</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Tech</span><span class="p">):</span>
    <span class="n">attack</span> <span class="o">+=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>In a naive approach, some might expect the member of <code class="docutils literal notranslate"><span class="pre">DebuffAttack</span></code> to be <code class="docutils literal notranslate"><span class="pre">attack</span> <span class="pre">+=</span> <span class="pre">1</span></code> after applying <code class="docutils literal notranslate"><span class="pre">DebuffPatch</span></code>. However, this would be wrong. The patch only changes the value, it does <strong>not</strong> touch the operator. Therefore, the member will be patched to <code class="docutils literal notranslate"><span class="pre">attack</span> <span class="pre">-=</span> <span class="pre">3</span></code> by <code class="docutils literal notranslate"><span class="pre">DebuffPatch</span></code>. Changing the operator requires an additional <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> symbol. Using <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> overwrites both the operator and the value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DebuffAttack</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="n">attack</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="n">OverwriteOperator</span><span class="o">&lt;</span><span class="n">DebuffAttack</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="c1"># overwrite operator and value of &#39;attack&#39;</span>
    <span class="n">attack</span> <span class="o">@+=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Applying <code class="docutils literal notranslate"><span class="pre">OverwriteOperator</span></code> will alter the member attack to <code class="docutils literal notranslate"><span class="pre">attack</span> <span class="pre">+=</span> <span class="pre">2</span></code>. The <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> modifier can also be stacked to overwrite the overwrite operators.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DebuffAttack</span><span class="o">&lt;</span><span class="n">Unit</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="n">attack</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="n">OverwriteOperator</span><span class="o">&lt;</span><span class="n">DebuffAttack</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="c1"># overwrite operator and value of &#39;attack&#39;</span>
    <span class="n">attack</span> <span class="o">@+=</span> <span class="mi">2</span>

<span class="n">FixOperator</span><span class="o">&lt;</span><span class="n">OverwriteOperator</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="c1"># this overwrites the operator of &#39;OverwriteOperator&#39;</span>
    <span class="c1"># with &#39;*=&#39;</span>
    <span class="n">attack</span> <span class="o">@*=</span> <span class="mi">1</span>

<span class="n">FixOperatorFix</span><span class="o">&lt;</span><span class="n">OverwriteOperator</span><span class="o">&gt;</span><span class="p">():</span>
    <span class="c1"># this overwrites the operator of &#39;OverwriteOperator&#39;</span>
    <span class="c1"># with &#39;@*=&#39;</span>
    <span class="n">attack</span> <span class="o">@@*=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>To show how <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> can be stacked, we have introduced two patches for <code class="docutils literal notranslate"><span class="pre">OverwriteOperator</span></code>: <code class="docutils literal notranslate"><span class="pre">FixOperator</span></code> and <code class="docutils literal notranslate"><span class="pre">FixOperatorFix</span></code>. They both overwrite the operator of <code class="docutils literal notranslate"><span class="pre">OverwriteOperator</span></code>, but have a slightly different outcome.</p>
<p><code class="docutils literal notranslate"><span class="pre">FixOperator</span></code> overwrites the operator of <code class="docutils literal notranslate"><span class="pre">OverwriteOperator</span></code> with <code class="docutils literal notranslate"><span class="pre">*=</span></code>. That means, after applying <code class="docutils literal notranslate"><span class="pre">FixOperator</span></code> the instance of OverwriteOperator will look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">OverwriteOperator</span> <span class="n">instance</span><span class="p">)</span>
    <span class="c1"># no more &#39;@&#39; because it was overwritten</span>
    <span class="n">attack</span> <span class="o">*=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The application of <code class="docutils literal notranslate"><span class="pre">FixOperator</span></code> also overwrote the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> modifier. Therefore, the application of <code class="docutils literal notranslate"><span class="pre">OverwriteOperator</span></code> will no longer overwrite the operator of <code class="docutils literal notranslate"><span class="pre">DebuffAttack</span></code>.</p>
<p>On the other hand, <code class="docutils literal notranslate"><span class="pre">FixOperatorFix</span></code> overwrites the operator of <code class="docutils literal notranslate"><span class="pre">OverwriteOperator</span></code> with <code class="docutils literal notranslate"><span class="pre">&#64;*=</span></code>, or more specifically with everything after the first occurence of <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">OverwriteOperator</span> <span class="n">instance</span><span class="p">)</span>
    <span class="c1"># &#39;@&#39; is still present</span>
    <span class="n">attack</span> <span class="o">@*=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">OverwriteOperator</span></code> is applied now, it will still overwrite the operator of <code class="docutils literal notranslate"><span class="pre">DebuffAttack</span></code>, but with the operator it got from the application of <code class="docutils literal notranslate"><span class="pre">FixOperatorFix</span></code>.</p>
</div>
<div class="section" id="adding-inheritance">
<h2>Adding inheritance<a class="headerlink" href="#adding-inheritance" title="Permalink to this headline">Â¶</a></h2>
<p>A special feature of patches is their ability to change the inheritance parents of a nyan object. This is introduced to allow the injection of a parent in between an existing parent-child relationship. This is denoted by the <code class="docutils literal notranslate"><span class="pre">[NewParent+,</span> <span class="pre">+OtherNewParent,</span> <span class="pre">...]</span></code> syntax. The position of the <code class="docutils literal notranslate"><span class="pre">+</span></code> specifies if the object is added at the front (Name+) or the end of the current parent list (+Name).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RootObject</span><span class="p">():</span>
    <span class="n">magic_value</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9001</span>

<span class="n">ChildObject</span><span class="p">(</span><span class="n">RootObject</span><span class="p">):</span>
    <span class="n">magic_value</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="n">InjectedObject</span><span class="p">(</span><span class="n">RootObject</span><span class="p">):</span>
    <span class="n">magic_value</span> <span class="o">-=</span> <span class="mi">7661</span>

<span class="n">InjectIt</span><span class="o">&lt;</span><span class="n">ChildObject</span><span class="o">&gt;</span><span class="p">[</span><span class="n">InjectedObject</span><span class="o">+</span><span class="p">]():</span>
    <span class="n">magic_value</span> <span class="o">+=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">InjectIt</span></code> patch is applied, <code class="docutils literal notranslate"><span class="pre">InjectedObject</span></code> will be the new direct parent of <code class="docutils literal notranslate"><span class="pre">ChildObject</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2019 openage-Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>